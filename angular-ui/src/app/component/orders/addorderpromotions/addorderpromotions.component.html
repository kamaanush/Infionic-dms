<div *ngIf="confirmOrder!=''" class="">
    <div class="main" *ngIf="confirm_Order">
        <div class=" promotionpopup-scroll1">

            <!-- Confiram order Other Information  -->
            <div class="addUser">
                <mat-icon mat-button class="close-iconn conform " [mat-dialog-close]="true"
                    (click)="closeconfirmorder()">close</mat-icon>
            </div>
            <div class="head-tt">
                <h3 class="addU font">{{"Confirm Order"}}</h3>
                <div class="card mr-2">
                    <div class="card-header label-cls" style="  color: white;background: linear-gradient(0deg, #018B75, #018B75);">
                        <strong class="ConfiramordrInformation">Other Information </strong>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- <div class="col-lg-4">
                                <div class="companyReff">
                                    <label class="DealerInfo-label"> ERP Reference No <span
                                            class="astr"></span></label>
                                    <input type="text" disabled placeholder="Enter" id="CompanyReferenceNo"
                                        [(ngModel)]="CompanyReferenceNo" class="form-control container input-box"
                                        (keypress)="onKeyPress($event)">
                                </div>
                            </div> -->
                            <div class="col-lg-4">
                                <div class="dealerReff">
                                    <label class="DealerInfo-label">Dealer Reference <span class="astr">*</span></label>
                                    <input type="text" disabled placeholder="Enter" id="DealerReferenceNo" 
                                        [(ngModel)]="DealerReferenceNo" class="form-control container input-box">
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="Remarkspromotiont">
                                    <label class="delivery_1">Remarks</label>
                                </div>
                                <input type="text" disabled placeholder="Type here If any Remarks" name="w3review"
                                    [(ngModel)]="DeliveryInstructions" class="form-control container input-box">
                            </div>
                        </div>
                    </div>
                </div>
               
                <!-- Confiram order Dealer Information  -->

                <div class="card  mr-2 mt-3">
                    <div class="card-header label-cls"
                        style="  color: white;background: linear-gradient(0deg, #018B75, #018B75);">
                        <span class="DealerInformationLabel">Dealer Information</span>
                    </div>
                    <div class="card-body">
                        <div class="row "> 
                            <div class="col-lg-3">
                                <div class="dealerr">
                                    <label class="DealerInfo-label">Dealer<span class="astr">*</span></label>
                                    <ng-select disabled [items]="dealerListArray" id="dealerAllArray" name="dealerAllArray"
                                        required [virtualScroll]="true" bindLabel="customerName" bindValue="customerId"
                                        [searchable]="true" [clearable]="false" placeholder=" Search & select dealer"
                                        [(ngModel)]="customerId" (change)="onItemSelectdealers($event)">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="geographyy">
                                    <label class="DealerInfo-label">Geography <span class="astr">*</span></label>
                                    <ng-select disabled class="selectgeo" [items]="GeoGrapydropdownListdata"
                                        id="GeoGrapydropdown" name="GeoGrapydropdown" required [virtualScroll]="true"
                                        bindLabel="geographyName" bindValue="geographyId" [searchable]="true"
                                        [clearable]="false" placeholder="Select geography" [(ngModel)]="geographyId"
                                        (change)="onItemSelectgeo($event)">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="billingAdrs">
                                    <label class="DealerInfo-label">Billing Address {{BillingaddressId}} <span
                                            class="astr">*</span></label>
                                    <ng-select disabled class="BillingAddress" [items]="dealersbillingAddress"
                                        id="BillingAddress" name="BillingAddress" required [virtualScroll]="true"
                                        bindLabel="Billingaddress" bindValue="BillingaddressId" [searchable]="true"
                                        [clearable]="false" placeholder="Select  billing address"
                                        [(ngModel)]="BillingaddressId" (change)="onItemSelectBillingAddress($event)">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="shippingAdrs">
                                    <label class="DealerInfo-label">Shipping Address <span class="astr"></span></label>
                                    <ng-select disabled class="shipingAddress" placeholder=" Select shiping address"
                                        [items]="dealersShippingAddress" id="shipingAddress" name="shipingAddress" required
                                        [virtualScroll]="true" bindLabel="address" bindValue="addressId" [searchable]="true"
                                        [clearable]="false" placeholder="Select  shipping address" [(ngModel)]="addressId"
                                        (change)="onItemSelectshippingAddress($event)">
                                    </ng-select>
                                </div>
                            </div>
                     </div>
                     </div>
                     </div>

                <!-- Confirom order Promotions Start Here -->

                <div class="card mr-2 mt-3">
                    <div class="card-header p-2 label-cls" style="color: white;background: linear-gradient(0deg, #018B75, #018B75);">
                        <div class="row ">
                            <div class="col-md-10">
                                <p class="label-class pl-3">
                                    <span class="Promotion-Name">Promotions</span> </p>
                            </div>
                            
                        </div>
                    </div>
                    <div class="card-body" style="height: 235px; overflow-y: auto;">
                        <div class="row">
                            <div class="col-md-3" *ngFor="let Item of arrayOfImages;let i=index;">
                                <div class="promotion-container" [ngClass]="{ 'selected': Item.isSelected }"
                                    (click)="selectPrmotionItem(Item)">
                                    <div class="img-container">
                                        <img class="promotion-img"
                                            src="data:image/jpeg;base64,{{Item.imageurl}}" alt="Promotion" />
                                    </div>
                                    <div class="promotion-info">
                                        <div class="promo-name">
                                            Name: <span> {{Item.promotionName}}</span>
                                        </div>
                                        <div class="promo-type">
                                            Type: <span> {{Item.promotionTypesName}}</span>
                                        </div>
                                        <div class="promo-name">
                                            MOQ: <span> {{Item.moq}}</span>
                                        </div>
                                        <div class="promo-view-wrapper">
                                            <div class="promo-view" (click)="showPromotionInfo($event,Item)">
                                                <mat-icon> remove_red_eye </mat-icon>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="cancel-icon" (click)="removePromotion($event,Item)">
                                        <mat-icon mat-button class="close-icon">close</mat-icon>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>  
        
                <!-- Confiram Order Start  Order Items-->

                <div class="card mr-2 mt-2">
                    <div class="card-header p-2" style="color: white;background: linear-gradient(0deg, #018B75, #018B75);">
                        <div class="row ">
                            <div class="col-md-10">
                                <p class="label-class" style="padding-left: 15px;">
                                    <span class="ORDER-ITEMS">Order Items</span> </p>
                            </div>
                           
                        </div>
                    </div> 
                    <div class="card-body p-0" *ngIf="!orderitem">
                        <div class="" style="padding-top: 10px;">
                         
                             <table>
                                <tr>
                                    <th scope="col"  class="ConfiramorderProductcode">Product Code </th>
                                    <th scope="col" class="ConfiramorderProductname">Product Name</th>
                                    <th scope="col"  class="ConfiramPrice">Price</th>
                                    <th scope="col"  class="ConfiramOrderDiscount">Discounted Price </th>
                                    <th scope="col"   class="ConfiramorderQTY">QTY</th>
                                    <th scope="col" class="COnfiramordrSubtotal">Sub Total</th>
                                    <th  scope="col"></th>
                                </tr>
                               
                                <ng-container *ngFor="let PromotionObj of AddOrderPromotionData; let i=index;">
                                    <tr>
                                        <td class="" style="padding: 4px;">
                                                 <mat-icon (click)="ExpandPromotion(i)"
                                                 style="cursor: pointer;   position: relative;   left: 3%;  top: 1px;">{{ expandedPromotions[i] ?'keyboard_arrow_down': 'keyboard_arrow_up'}}</mat-icon>
                                                <span  style="position: relative;left: 13px;right: 6px;color: black;top: -6px;" >Promotion &nbsp;{{PromotionObj.promotionTypesNmae}}</span>
                                                    <!-- {{PromotionObj.promotionName}} -->
                                                    <!-- {{PromotionObj.promotionTypesNmae}}</span>    -->
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                    <ng-container *ngIf='!expandedPromotions[i]'>
                                        <tr *ngFor="let Item of PromotionObj.itemDetails; let j=index;">
                                            
                                            <td style="padding-left: 35px;">{{Item.productSKUName}}</td>
                                            <td>{{Item.stockitemname}}</td>
                                            <td style="text-align: right;">
                                                <input type="text" disabled [(ngModel)]="Item.price"
                                                      style="text-align: right;border: none;background: none;">
                                            </td>
                                          
                                            <td style="text-align: right;">
                                                <input type="text" disabled [(ngModel)]="Item.discount"
                                                    [ngClass]="Item.discount == 100 ? 'IteminputBoxesD' : 'IteminputBoxes'"
                                                    style="text-align: right;border: none;background: none;">
                                            </td>
                                      
                                            <td style="text-align: right;">
                                                <input type="text" disabled [(ngModel)]="Item.quantity"
                                                style="text-align: right;border: none;background: none;">
                                            </td>
                                            <td>
                                                <input type="text" disabled [(ngModel)]="Item.finalValue"
                                                style="text-align: right;border: none;position: relative;left: 20px;background: none;">
                                            </td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </ng-container>
                                    <tr>
                                        <td>
                                            <mat-icon (click)="toggleRow()" style="cursor: pointer; position: relative; left: 3%; top: 1px;">
                                                {{ rowVisibility[i] ? 'keyboard_arrow_down' : 'keyboard_arrow_up' }}
                                            </mat-icon>
                                            <span style="position: relative; left: 13px; color: black; top: -6px;">Non Promotions</span>
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                
                                    <ng-container *ngFor="let item of AddorderNonpromotiondata?.itemDetails; let i=index;">
                                        <tr *ngIf="!rowVisibility">
                                            <td style="padding-left: 35px;">{{ item.productSKUName }}</td>
                                            <td>{{ item.stockitemname }}</td>
                                            <td style="text-align: right;">
                                                <input type="text" disabled [(ngModel)]="item.price" class="NONPromotionsPrice">
                                            </td>
                                            <td style="text-align: right;">
                                                <input type="text" disabled [(ngModel)]="item.discount"
                                                    [ngClass]="item.discount == 100 ? 'IteminputBoxesD' : 'IteminputBoxes'"
                                                    style="text-align: right;background: none;border: none;">
                                            </td>
                                            <td style="text-align: right;">
                                                <input type="text" disabled [(ngModel)]="item.quantity" class="NON_promotionsQTY">
                                            </td>
                                            <td>
                                                <input type="text" disabled [(ngModel)]="item.finalValue" class="FINALValueNONPromotions">
                                            </td>
                                            <td></td>
                                        </tr>
                                    </ng-container>
                                    <tr *ngIf="(editTotalqty||shippingPackingchargeDetails.subTotal)>0">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <!-- <td></td> -->
                                        <td style="text-align: end;"><b>Total</b></td>
                                        <!-- <td style="text-align: end;"><b>{{(editTotalqty||0)+(productqty?.overallQty+nonPromoQTY)}}</b></td> -->
                                        <td style="text-align: end;"><b>{{(shippingPackingchargeDetails.totalQty||0)}}</b></td>
                                        <td style="text-align: center;"><b>${{ (shippingPackingchargeDetails.subTotal||0) ||( nonPromotionAmount||0)}}</b></td>
                                    </tr>
                                </ng-container> 
                                
                             </table>
                            </div>

                            <!-- Packing charges and shipping charges  my code -->
                            <div class="row mt-3">
                                <table class="TOtalCalculations" *ngIf="shippingPackingchargeDetails">
                                    <tr>
                                        <td class="text-left SUBITEMNAME ml-5"><p style="margin-left: 20%;margin-top: 7px;">Sub-Total</p></td>
                                        <td class="text-right numbers ">{{shippingPackingchargeDetails.subTotal| currency:'USD':'symbol':'1.2-2'}}</td>
                                    </tr>
                                    <tr>
                                        <td class="text-left SUBITEMNAME"><p style="margin-left: 20%;">Packing Charge</p></td>
                                        <td class="text-right numbers ">{{shippingPackingchargeDetails.packingCharges}}</td>
                                    </tr>
                                    <tr>
                                        <td class="text-left SUBITEMNAME"><p style="margin-left: 20%;" >Shipping Charge</p></td>
                                        <td class="text-right numbers">{{shippingPackingchargeDetails.shippingCharges}}</td>
                                    </tr>
                                    <!-- <tr>
                                        <td class="text-left SUBITEMNAME"><p style="margin-left: 20%;" > Tax</p> </td>
                                        <td class="text-right numbers">{{shippingPackingchargeDetails.taxElement}}</td>
                                    </tr> -->
                                    <tr>
                                        <td class="text-left SUBITEMNAME" style="font-family: 'Gilroy-SemiBold';"><p style="margin-left: 20%;">Total value</p></td>
                                        <td class="text-right numbers">{{shippingPackingchargeDetails.total}}</td>
    
                                    </tr>
                                </table>
                            </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="row footers">
        <div class="col-md-5">
            <button type="button" class="saveas-draft" (click)="GetConfirmOrders()">Confirm</button>
        </div>
        <div class="col-md-2">
            <button type="button" class="save-submi_t" (click)="GetRejectOrders()">Reject</button>
        </div>
    </div>
</div>
<div>
</div>
<div *ngIf="confirmOrder==''">

    <div class="main">

        <div class=" promotionpopup-scroll2">
            <div class="addUser">
                <!-- <img class="print-img" src="../../../assets/material/print-img.svg" alt=""> -->
            </div>
            <div class="head-t p-2">
                <p class="purchaseOrdersHead">Purchase Orders <img src="../../../../assets/ic_baseline-arrow-left.png"><span class="addU font headd">{{actineLabel}}</span></p>
                <!-- <h3 class="addU font">{{actineLabel}}</h3> -->
                <mat-icon mat-button class="close-icon" [mat-dialog-close]="true">close</mat-icon>
                <div class="row top-bottom">
                    <div class="row text-center"></div>
                </div>
                
                <div class="card mb-3"  *ngIf="userType ==='Admin' && actineLabel=='Edit order'">
                    <div class="card-header label-cls" style="  color: white;background: linear-gradient(0deg, #018B75, #018B75);">
                        <strong class="ConfiramordrInformation">Other Information </strong>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-4">
                                <div class="companyReff">
                                    <label class="DealerInfo-label"> ERP Reference No <span
                                            class="astr"></span></label>
                                    <input type="text" placeholder="Enter" id="CompanyReferenceNo"
                                        [(ngModel)]="CompanyReferenceNo" class="form-control container input-box">
                                        <!-- (keypress)="onKeyPress($event)" -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Dealer Reference -->
                <div class="card">
                    <div class="card-header label-cls" style="  color: white;background: linear-gradient(0deg, #018B75, #018B75);">
                        <strong class="DealerRefrenceno">Dealer Reference</strong>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- <div class="col-lg-4" *ngIf="userType !== 'Dealer Admin'">
                                                                <div class="companyReff">
                                                                    <label class="DealerInfo-label">Company Reference No </label>
                                                                    <input type="number" placeholder="Enter" id="CompanyReferenceNo"
                                                                        [(ngModel)]="CompanyReferenceNo" class="form-control container input-box">
                                                                </div>
                                                            </div> -->
                
                            <div class="col-lg-4">
                                <div class="dealer_Reff">
                                    <label class="DealerInfo-label">Dealer Reference No</label>
                                    <input type="text" placeholder="Enter Number" id="DealerReferenceNo" [(ngModel)]="DealerReferenceNo"
                                        class="form-control container input-box">
                                </div>
                            </div>
                
                            <div class="col-lg-8">
                                <div class="Remarkspromotiont">
                                    <label class="delivery_1">Remarks</label>
                                </div>
                                <input type="text" placeholder="Type here If any Remarks" id="DealerReferenceNo"
                                    [(ngModel)]="DeliveryInstructions" class="form-control container input-box">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Dealer Information -->
                <div class="card mt-3" *ngIf="userType !== 'Dealer Admin'">
                    <div (click)="expandDealerInfoDiv()" class="card-header label-cls"
                        style="  color: white;background: linear-gradient(0deg, #018B75, #018B75);">
                        <span class="DealerInformationLabel">Dealer Information</span>
                    </div>
                    <div class="card-body">
                        <div class="row ">
                            <div class="col-lg-3">
                                <div class="dealerr">
                                    <label class="DealerInfo-label">Dealer <span class="astr">*</span></label>
                                    <ng-select [items]="dealerListArray" class="my-ng-select" id="dealerAllArray" name="dealerAllArray"
                                        required [disabled]="dealerDisabled" [virtualScroll]="true" bindLabel="customerName"
                                        bindValue="customerId" [searchable]="true" [clearable]="false" appendTo="body"
                                        placeholder=" Search & select dealer" [(ngModel)]="customerId"
                                        (change)="onItemSelectdealers($event)">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-lg-3">
                                <div class="geographyy">
                
                                    <label class="DealerInfo-label">Geography <span class="astr">*</span></label>
                                    <ng-select class="selectgeo" [items]="GeoGrapydropdownListdata" id="GeoGrapydropdown"
                                        name="GeoGrapydropdown" required [virtualScroll]="true" bindLabel="geographyName"
                                        bindValue="geographyId" [searchable]="true" [clearable]="false" placeholder="Select geography"
                                        [(ngModel)]="geographyId" appendTo="body" (change)="onItemSelectgeo($event)">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="billingAdrs">
                                    <label class="DealerInfo-label">Billing Address {{BillingaddressId}} <span
                                            class="astr">*</span></label>
                                    <!-- <input matInput placeholder=" Select Billing address" #input class="form-control container input-box" > -->
                                    <ng-select class="BillingAddress" [items]="dealersbillingAddress" id="BillingAddress"
                                        name="BillingAddress" required [virtualScroll]="true" bindLabel="Billingaddress"
                                        bindValue="BillingaddressId" [searchable]="true" [clearable]="false"
                                        placeholder="Select  billing address" [(ngModel)]="BillingaddressId" appendTo="body"
                                        (change)="onItemSelectBillingAddress($event)">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="shippingAdrs">
                                    <label class="DealerInfo-label">Shipping Address <span class="astr">*</span></label>
                
                                    <ng-select class="shipingAddress" [items]="dealersShippingAddress" id="shipingAddress"
                                        name="shipingAddress" required [virtualScroll]="true" bindLabel="address" bindValue="addressId"
                                        [searchable]="true" [clearable]="false" placeholder="Select shipping address"
                                        [(ngModel)]="addressId" appendTo="body" (change)="onItemSelectshippingAddress($event)">
                                    </ng-select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Promotions -->
                <div class="card mt-3">
                    <div class="card-header p-2 label-cls" style="color: white;background: linear-gradient(0deg, #018B75, #018B75);">
                        <div class="row ">
                            <div class="col-md-10">
                                <p class="label-class pl-3">
                                    <span class="Promotion-Name">Promotions</span> </p>
                            </div>
                            <div class="col-md-2">
                                <input class="searchInput_11" type="text" name="" placeholder="Search Here Anything"
                                    (keyup)="searchData($event)">
                                <mat-icon class="searchiconsmat">search</mat-icon>
                                <button class="searchbuttonpromotions">Search</button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row" style="height: 200px; overflow-y: scroll;">
                            <div class="col-md-3" *ngFor="let Item of arrayOfImages;let i=index;">
                                <div class="promotion-container" [ngClass]="{ 'selected': Item.isSelected }"
                                    (click)="selectPrmotionItem(Item)">
                                    <div class="img-container">
                                        <!-- <img class="promotion-img" src="https://via.placeholder.com/260x280"  alt="Promotion"/> -->
                                        <img class="promotion-img" src="data:image/jpeg;base64,{{Item.imageurl}}" alt="Promotion" />
                
                                    </div>
                                    <div class="promotion-info">
                                        <div class="promo-name">
                                            Name: <span> {{Item.promotionName}}</span>
                                        </div>
                
                                        <div class="promo-type">
                                            Type: <span> {{Item.promotionTypesName}}</span>
                                        </div>
                                        <div class="promo-name">
                                            MOQ: <span> {{Item.moq}}</span>
                                        </div>
                                        <div class="promo-view-wrapper">
                                            <div class="promo-view" (click)="showPromotionInfo($event,Item)">
                                                <mat-icon> remove_red_eye </mat-icon>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="cancel-icon" (click)="removePromotion($event,Item)">
                                        <mat-icon mat-button class="close-icon">close</mat-icon>
                                    </div>
                                </div>
                            </div>
                
                        </div>
                    </div>
                </div>
                <!-- Order Items -->
                <div class="card mt-3">
                    <div class="card-header p-2" style="color: white;background: linear-gradient(0deg, #018B75, #018B75);">
                        <div class="row ">
                            <div class="col-md-10">
                                <p class="label-class" style="padding-left: 15px;">
                                    <span class="ORDER-ITEMS">Order Items</span> </p>
                            </div>
                            <div class="col-md-2">
                                <!-- this.geographyId == null || this.customerId == null -->
                                <div class="addEditNonPromotion">
                                    <button  (click)="addOrderNonPromotionList()" class="add-edit-non-promo">Add/Edit Non Promo Items </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div class="" style="padding-top: 10px;">
                            <table>
                               
                                <tr>
                                    <th scope="col"  class="PRODUCTCODE">Product Code </th>
                                    <th scope="col" class="PRODUCTNAME">Product Name</th>
                                    <th scope="col"  class="PRICE">Price</th>
                                    <th scope="col"  class="DISCOUNTPRICE">Discounted Price </th>
                                    <th scope="col"   class="QTY">QTY</th>
                                    <th scope="col" class="SUBTOTAL">Sub-Total</th>
                                    <th  scope="col"></th>
                                </tr>
                                
                                <ng-container *ngFor="let PromotionObj of AddOrderPromotionData; let i=index;">
                                    <!-- {{AddOrderPromotionData|json}} -->
                                        <tr>
                                            <td class="" style="padding: 4px;">
                                                <mat-icon (click)="ExpandPromotion(i)"
                                                    style="cursor: pointer;   position: relative;   left: 3%;  top: 1px;">{{ expandedPromotions[i] ?'keyboard_arrow_down': 'keyboard_arrow_up'}} </mat-icon>
                                                <span style="position: relative;left: 13px;right: 6px;color: black;top: -6px;">Promotion
                                                    &nbsp;{{PromotionObj.promotionTypesNmae}}</span>
                                            </td>
                                            <td> <span class="EDIT-data" (click)="editPromotionItem(PromotionObj.promotionId)">Edit</span></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td><span class="remove-dataCircle" (click)="removePromotionItem(Item, PromotionObj.promotionId)"> <i
                                                        class="fa fa-trash-o"></i></span></td>
                                            <td>
                                            <td>
                                        </tr>

                                    <ng-container *ngIf="!expandedPromotions[i]">
                                     
                                        <tr *ngFor="let Item of PromotionObj.itemDetails; let j=index;"> 
                                           
                                            <td [ngClass]="{'promotionclass': Item.isBuyProduct === false} && Item.discount === 100 ? 'IteminputBox' : (Item.discount === 0 ? 'promotionclass' : 'nonpromoclassName')" style="padding-left: 35px;">
                                                    {{Item.productSKUName}}  
                                            </td>
                                            <td [ngClass]="{'promotionclass': Item.isBuyProduct === false} && Item.discount === 100 ? 'IteminputBoxesD' : (Item.discount === 0 ? 'promotionclass' : 'nonpromoclassName')">
                                                    {{Item.stockitemname}}
                                            </td>
                                            <td style="text-align: right;">
                                                <input [ngClass]="{'promotionclass': Item.isBuyProduct === false} && Item.discount === 100 ? 'IteminputBoxesD' : (Item.discount === 0 ? 'promotionclass' : 'nonpromoclassName')" type="text" disabled [(ngModel)]="'$'+Item.price"
                                                style="text-align: right;border: none;background: none;">
                                            </td>
                                            <td style="text-align: right;">
                                                <input type="text" disabled [(ngModel)]="'$'+Item.discount" 
                                                    [ngClass]="Item.discount === 100 ? 'IteminputBoxesD' : (Item.discount === 0 ? 'promotionclass' : 'nonpromoclassName')"
                                                    style="text-align: right;border: none;background: none;">
                                                   
                                            </td>
                                            <td style="text-align: right;">
                                                <input [ngClass]="{'promotionclass': Item.isBuyProduct === false} && Item.discount === 100 ? 'IteminputBoxesD' : (Item.discount === 0 ? 'promotionclass' : 'nonpromoclassName')"  type="text" disabled
                                                    [(ngModel)]="Item.quantity" style="text-align: right;border: none;background: none;">
                                            </td>
                                           
                                            <td >
                                               <input [ngClass]="{'promotionclass': Item.isBuyProduct === false} && Item.discount === 100 ? 'IteminputBoxesD' : (Item.discount === 0 ? 'promotionclass' : 'nonpromoclassName')" type="text" disabled [(ngModel)]="'$'+Item.finalValue"
                                                style="text-align: right;border: none;position: relative;background: none;">
                                            </td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        
                                    </ng-container>
                                </ng-container>
                                

                                <!-- nonpromotions list view *ngIf="DisplayNonpromotion"-->
                                
                                <tr *ngIf="DisplayNonpromotion">
                                    <td>
                                        <mat-icon (click)="ExpandNonPromotion()"
                                        style="cursor: pointer;   position: relative;   left: 3%;  top: 1px;">{{ NonPromotion ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }} </mat-icon>
                                        <span  style="position: relative;left: 13px;color: black;top: -6px;" >Non Promotions</span>
                                    </td>
                                    <td><span class="removeCircleNONPromotiondata" (click)="addOrderNonPromotionList()"  >Edit</span></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>

                               
                                <ng-container *ngIf="NonPromotion">
                                    <tr *ngFor="let Item of AddorderNonpromotiondata?.itemDetails; let i=index;">
                                        <td style="padding-left: 35px;">{{Item.productSKUName}}</td>
                                        <td >{{Item.stockitemname}}</td>
                                        <td style="text-align: right;">
                                            <input  type="text" disabled
                                                [(ngModel)]="'$'+Item.price" class="NonPromoinputboxPrice">
                                            </td>
                                        <td style="text-align: right;">
                                            <input  type="text" disabled
                                                [(ngModel)]="'$'+Item.discount"
                                                [ngClass]="Item.discount == 100 ? 'IteminputBoxesD' : 'IteminputBoxes'"
                                                style="text-align: right;background: none;border: none;">
                                        </td>
                                        <td style="text-align: right;"> <input  type="text" disabled
                                                [(ngModel)]="Item.quantity" class="NonPromodataquantity"> </td>
                                        <td> 
                                            <input type="text" disabled [(ngModel)]="'$'+Item.finalValue"
                                                class="FInalvaluenonpromo" [style.left]="value.length>0?'0px':'18px'" >
                                             </td>
                                        <td>
                                            <div class="removeCircleNONPromodata" (click)="removeNonPromotionItem(Item)">
                                                <i class="fa fa-trash-o"></i>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr *ngIf="(editTotalqty||shippingPackingchargeDetails.subTotal)>0">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <!-- <td></td> -->
                                        <td style="text-align: end;"><b>Total</b></td>
                                        <!-- <td style="text-align: end;"><b>{{(editTotalqty||0)+(productqty?.overallQty+nonPromoQTY)}}</b></td> -->
                                        <td style="text-align: end;"><b>{{(shippingPackingchargeDetails.totalQty||0)}}</b></td>
                                        <td style="text-align: center;" [style.padding-left]="value.length>0?'0px':'18px'"><b>{{ (shippingPackingchargeDetails.subTotal||0) ||( nonPromotionAmount||0)| currency:'USD':'symbol':'1.2-2'}}</b></td>
                                    </tr>
                                </ng-container>
                            </table>
                        </div>
                        <div class="row mt-3">
                            <table class="TOtalCalculations" *ngIf="shippingPackingchargeDetails">
                                <tr>
                                    <td class="text-left SUBITEMNAME ml-5"><p style="margin-left: 20%;margin-top: 7px;">Sub-Total</p></td>
                                    <td class="text-right numbers" 
                                    [style.padding-right]="shippingPackingchargeDetails.total > 0 ? '17%' : '13%'">
                                        {{  (shippingPackingchargeDetails.subTotal ? shippingPackingchargeDetails.subTotal : '0')| currency:'USD':'symbol':'1.2-2'}}
                                    </td>                                
                                </tr>
                                <tr>
                                    <td class="text-left SUBITEMNAME"><p style="margin-left: 20%;margin-top: 7px;">Packing Charge</p></td>
                                    <td class="text-right numbers "
                                    [style.padding-right]="shippingPackingchargeDetails.total > 0 ? '17%' : '13%'">{{'$'+(shippingPackingchargeDetails.packingCharges ? shippingPackingchargeDetails.packingCharges : '0')}}</td>
                                </tr>
                                <tr>
                                    <td class="text-left SUBITEMNAME"><p style="margin-left: 20%;" >Shipping Charge</p></td>
                                    <td class="text-right numbers"
                                    [style.padding-right]="shippingPackingchargeDetails.total > 0 ? '17%' : '13%'">{{'$'+(shippingPackingchargeDetails.shippingCharges ? shippingPackingchargeDetails.shippingCharges: '0' )}}</td>
                                </tr>
                                <!-- <tr>
                                    <td class="text-left SUBITEMNAME"><p style="margin-left: 20%;" > Tax</p> </td>
                                    <td class="text-right numbers">{{shippingPackingchargeDetails.taxElement}}</td>
                                </tr> -->
                                <tr>
                                    <td class="text-left SUBITEMNAME" style="font-family: 'Gilroy-SemiBold';"><p style="margin-left: 20%;">Total value</p></td>
                                    <td class="text-right numberss"
                                    [style.padding-right]="shippingPackingchargeDetails.total > 0 ? '17%' : '13%'">{{  (shippingPackingchargeDetails.total ? shippingPackingchargeDetails.total : '0')| currency:'USD':'symbol':'1.2-2'}}
                                    </td>

                                </tr>
                            </table>

                            <!-- </div>  -->
                        </div>
                    </div>
                  </div>
                <!--  ===============================Promotions start ==================================-->
                <!-- <div class="top-bottom"> -->
                    <!-- <div class="collapsible">
                        <div class="row">
                            <div class="col-lg-6" (click)="expandOrderItemsDiv()">
                                <p class="label-cls"> Order Items</p>
                            </div>
                            <div class="col-lg-5">
                                <div class="addbtns d-flex">
                                    <div class="addEditPromotion">
                                        <button (click)="addOrderPromotionList()" class="add-edit-promo">Add/Edit Promo
                                            Items</button>
                                    </div>
                                    <div class="addEditNonPromotion">
                                        <button (click)="addOrderNonPromotionList()" class="add-edit-non-promo">Add/Edit
                                            Non Promo Items </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-1" (click)="expandOrderItemsDiv()">
                                <img [src]="image2" class="expand-arrow" alt="add-user-btn">
                            </div>
                        </div>
                    </div> -->
                    <!-- <div class="content"> -->
                        <!-- <div class="section mt-1">
                            <table class="table table-striped">
                            <table>
                                <tr>

                                    <th style="width:107px !important;position: relative;">
                                        <b style="font-weight: bold;">Product Code</b>
                                    </th>
                                    <th class="align-center" class="PROCODE"></th>
                                    <th class="align-center">Product Name</th>
                                    <th class="align-right">UoM</th>
                                    <th class="align-right">Price</th>
                                    <th class="align-right">Discounted Price </th>
                                    <th class="align-right"> Qty </th>
                                    <th class="align-right">Sub Total</th>
                                    <th></th>
                                </tr>


                                <ng-container *ngFor="let PromotionObj of AddOrderPromotionData; let i=index;">
                                    <div class="ExpandArrow" (click)="ExpandPromotion(i)">
                                        <img [src]="image55" class="expand-arrow_W" alt="add-user-btn">
                                        Promotion
                                        <span id="protype" style="color: rgba(0, 0, 0, 1);">
                                            {{PromotionObj.promotionName}}
                                            {{PromotionObj.promotionTypeNmae}}
                                            {{PromotionObj.promotionTypesName}}
                                        </span>
                                    </div>
                                    <ng-container *ngIf='PromotionObj.isOpen'>
                                        <tr *ngFor="let Item of PromotionObj.itemDetails; let j=index;">
                                            <td>
                                                <div class="action-items">
                                                    <div class="edit" *ngIf="j==0"
                                                        (click)="editPromotionItem(PromotionObj.promotionId)">
                                                        Edit
                                                    </div>

                                                </div>
                                            </td>
                                            <td>
                                                <p id="productname"
                                                    [ngClass]="{'promotionclass': Item.isBuyProduct===false }">
                                                    {{Item.productSKUName}}</p>
                                            </td>
                                            <td>
                                                <p class="itemLeft"
                                                    [ngClass]="{'promotionclass': Item.isBuyProduct===false}">
                                                    {{Item.stockitemname}}</p>
                                            </td>

                                            <td>
                                                <input [ngClass]="{'promotionclass': Item.isBuyProduct===false}"
                                                    type="text" disabled [(ngModel)]="Item.price"
                                                    class="IteminputBoxesPriceBOX" style="margin-right: 17%;">
                                            </td>

                                            <td>
                                                <input type="text" disabled [(ngModel)]="Item.discount"
                                                    style="text-align: right;"
                                                    [ngClass]="Item.discount == 100 ? 'IteminputBoxesD' : 'IteminputBoxesprice' && Item.discount === 0 ? 'promotionclass' : 'nonpromoclassName'">
                                            </td>
                                            <td>
                                                <input [ngClass]="{'promotionclass': Item.isBuyProduct===false}"
                                                    style="margin-right: 25%;" type="text" disabled
                                                    [(ngModel)]="Item.quantity" class="IteminputBoxes">
                                            </td>

                                            <td>
                                                <input [ngClass]="{'promotionclass': Item.isBuyProduct===false}"
                                                    type="text" disabled [(ngModel)]="Item.finalValue"
                                                    class="IteminputBoxes">
                                            </td>
                                            <td>
                                                <div class="action-items">
                                                    <div class="removeCircle" *ngIf="j==0"
                                                        (click)="removePromotionItem(Item, PromotionObj.promotionId)">
                                                        <i class="fa fa-trash-o"></i>
                                                    </div>
                                                </div>
                                            </td>

                                        </tr>
                                    </ng-container>
                                </ng-container>

                                nonpromotions list view

                                <ng-container *ngIf="DisplayNonpromotion">
                                    <div class="ExpandArrow" (click)="ExpandNonPromotion()">
                                        <img [src]="image55" class="expand-arrow_W" alt="add-user-btn">Non Promotions
                                        <span id="protype" style="color: rgba(0, 0, 0, 1);"> </span>

                                    </div>
                                </ng-container>
                                <ng-container *ngIf="NonPromotion">

                                    <tr *ngFor="let Item of AddorderNonpromotiondata?.itemDetails; let i=index;">

                                        <td style="width:50px !important;">
                                                                <span  *ngIf="i == 0"> NP
                                                                </span>
                                                            </td>

                                        <td style="text-align: left;">{{Item.productSKUName}}</td>
                                        <td style="width:10px;"></td>
                                        <td style="text-align: left;">{{Item.stockitemname}}</td>
                                        <td style="text-align: left;">{{Item.materialCustomName}}</td>
                                        <td><input type="text" disabled [(ngModel)]="Item.uomname" class="IteminputBoxes"></td>
                                        <td><input style="margin-right: 17%;" type="text" disabled
                                                [(ngModel)]="Item.price" class="IteminputBoxes"></td>

                                        <td><input style="margin-right: -12%;" type="text" disabled
                                                [(ngModel)]="Item.discount"
                                                [ngClass]="Item.discount == 100 ? 'IteminputBoxesD' : 'IteminputBoxes'">
                                        </td>

                                        <td> <input style="margin-right: 25%;" type="text" disabled
                                                [(ngModel)]="Item.quantity" class="IteminputBoxes"> </td>

                                        <td><input type="text" disabled [(ngModel)]="Item.stock" class="IteminputBoxes"> </td>
                                        <td><input type="text" disabled [(ngModel)]="Item.finalPrice" class="IteminputBoxes"> </td>

                                        <td> <input type="text" disabled [(ngModel)]="Item.finalValue"
                                                class="IteminputBoxes"> </td>

                                        <td><input type="text" disabled [(ngModel)]="Item.taxvalue" class="IteminputBoxes"> </td>
                                        <td> <input type="text" disabled [(ngModel)]="Item.amount" class="IteminputBoxes"></td>
                                        <td>
                                            <div class="removeCircle" (click)="removeNonPromotionItem(Item)">
                                                <i class="fa fa-trash-o"></i>
                                            </div>
                                        </td>
                                    </tr>
                                </ng-container>
                            </table>
                        </div> -->
                        <!-- <div class="row mt-2">

                            <div class="   totall" *ngIf="shippingPackingchargeDetails">
                                <div class="innerTotal d-flex">
                                    <div class="subitem">
                                        <p class="alltotals sub_totallss">Sub Total </p>
                                        <span id="totallsss">{{shippingPackingchargeDetails.subTotal}}</span>
                                    </div>
                                    <div class="subitem">
                                        <p class="alltotals tax_element">Tax Element</p>
                                        <span id="tax_color">{{shippingPackingchargeDetails.taxElement}}</span>
                                    </div>
                                    <div class="subitem">
                                        <p class="alltotals packing_Charges">Packing Charge</p>
                                        <span id="pkcharger">{{shippingPackingchargeDetails.packingCharges}}</span>
                                    </div>
                                    <div class="subitem">
                                        <p class="alltotals shipping_charges">Shipping Charge</p>
                                        <span id="Shippinggg">{{shippingPackingchargeDetails.shippingCharges}}</span>
                                    </div>
                                    <div class="subitem total_total">
                                        <p class="alltotals totaltotal ">Total</p>
                                        <span id="totallssss">{{shippingPackingchargeDetails.total}}</span>
                                    </div>
                                </div>
                            </div>
                            <div  *ngIf="shippingPackingchargeDetails">  
                            <table class="TOTAL" *ngIf="shippingPackingchargeDetails">
                                <tr>
                                    <td class="text-left SUBITEMNAME">Subtotal</td>
                                    <td class="text-right numbers ">{{shippingPackingchargeDetails.subTotal}}</td>
                                </tr>
                                <tr>
                                    <td class="text-left SUBITEMNAME">Packing Charge</td>
                                    <td class="text-right numbers ">{{shippingPackingchargeDetails.packingCharges}}</td>
                                </tr>
                                <tr>
                                    <td class="text-left SUBITEMNAME">Shipping Charge</td>
                                    <td class="text-right numbers">{{shippingPackingchargeDetails.shippingCharges}}</td>
                                </tr>
                                <tr>
                                    <td class="text-left SUBITEMNAME">Tax</td>
                                    <td class="text-right numbers">{{shippingPackingchargeDetails.taxElement}}</td>
                                </tr>
                                <tr>
                                    <td class="text-left SUBITEMNAME" style="font-family: 'Gilroy-SemiBold';">Total
                                        value</td>
                                    <td class="text-right numbers">{{shippingPackingchargeDetails.total}}</td>
                                </tr>
                            </table>

                            </div> 
                        </div> -->
                    <!-- </div> -->
                <!-- </div> -->


                <!-- <div class="top-bottom">
                    <div (click)="expandOtherInfoDiv()" class="collapsible">
                        <div class="row">
                            <div class="col-md-11">
                                <p class="label-cls">Other Information </p>
                            </div>
                            <div class="col-md-1">
                                <img [src]="image3" class="expand-arrow" alt="add-user-btn">
                            </div>
                        </div>
                    </div>
                     <div class="content" *ngIf="!otherInfo">
                        <div class="row">

                            <div class="col-lg-4">


                                <div class="my_Datepicker promotion-datepicker">
                                    <label class="boldR">Requirement Date</label><br>
                                    <mat-form-field class="placeh-align">
                                        <mat-label>Select a date</mat-label>
                                        <input matInput [matDatepicker]="picker" (dateChange)="dateChange($event)"
                                            [min]="minDate" [(ngModel)]="startdate" name="requireDate"
                                            #requireDate="ngModel">
                                   
                                        <mat-datepicker-toggle matSuffix [for]="picker">
                                            <mat-icon matDatepickerToggleIcon>
                                                <img src="assets/img/calender2.png" class="calendarToggle">
                                            </mat-icon>
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #picker></mat-datepicker>
                                    </mat-form-field>
                                </div>

                            </div>


                            <div class="col-lg-4" *ngIf="userType !== 'Dealer Admin'">
                                <div class="companyReff">
                                    <label class="DealerInfo-label">Company Reference No </label>
                                    <input type="number" placeholder="Enter" id="CompanyReferenceNo"
                                        [(ngModel)]="CompanyReferenceNo" class="form-control container input-box">
                                </div>
                            </div>

                            <div class="col-lg-4">
                                <div class="dealerReff">
                                    <label class="DealerInfo-label">Dealer Reference No</label>
                                    <input type="text" placeholder="Enter" id="DealerReferenceNo"
                                        [(ngModel)]="DealerReferenceNo" class="form-control container input-box">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="promotiont">
                                        <label class="delivery1">Delivery Instructions/Extra Information</label>
                                    </div>
                                    <textarea class="text-area-extrainfo" style="resize: none; "
                                        placeholder="Please write down if there are any delivery instructions or extra information you want to share"
                                        name="w3review" rows="2" [(ngModel)]="DeliveryInstructions"
                                        cols="65"></textarea>


                                </div>
                            </div>

                        </div>
                    </div> 

                </div> -->
            </div>
        </div>

    </div>
    <div>
        <div class="row footer">
            <div class="col-md-6">
                <!-- <button [disabled]=" !customerId || !geographyId || !BillingaddressId || !addressId ||isButtonDisabled" type="button"
                    class="save-submit" (click)="ordersubmit('draft')"> Draft to Save </button> -->
            </div>
            <div class="col-md-6">
                <!-- <button type="button" class="saveas-draft" (click)="ordersubmit('draft')">Save as Draft</button> -->
                <button type="button" class="save-submit11" [disabled]="isButtonDisabled" (click)="ordersubmit('save')" id="submitbt"
                    name="submitbt">Save</button>

            </div>
            
            <!-- <div class="col-md-5">
                <button type="button" [mat-dialog-close]="false" class="cancel">Cancel</button>
            </div> -->
            <span *ngIf=" !customerId || !geographyId || !BillingaddressId || !addressId"
                style="left: 251px; margin-top: -3px;position: relative;">*please fill required fields</span>
        </div>

    </div>
</div>
<!-- non promotions -->

<div class="overlay" *ngIf="Non_promotions && confirmOrder ==''">
    <div class="popup">

        <div class="FONT">
            <mat-icon mat-button class="close_icon " (click)="Uclose()">close</mat-icon>
            <div class="mai_n p-2">

                <div class=" promotionpopup-scroll3">
                    <div class="head-t text-center">
                        <h3 class="labelU font">Non-Promotions Items </h3>
                    </div>
                    <div class="card">
                        <div class="card-header" style="color: white;background: linear-gradient(0deg, #018B75, #018B75);">
                            <b>Non-Promotions items</b>
                        </div>
                        <div class="card-body">
                            <div class="headingnonpro">
                                <!-- mine 1 -->
                                <div class="headingcontent">
                                    <div class="row" style="margin-left: 0%;">
                                        <div class="col" style="height:71px"
                                            style="background-color: rgba(222, 226, 230, 0.2);height: 52px;">
                                            <label id="TotalORDER_qty" for="inputField">Total Order Qty</label>
                                            <span id="Total_order_qty">{{promotionQTY + nonPromotionQTY}} </span>
                                        </div>
                    
                                        <div class="col" style="background-color: rgba(222, 226, 230, 0.2);">
                                            <label id="TotalORDER_qty" for="inputField">Total Order Amount</label>
                                            <span id="Total_order_qty">${{ (promotionAmount + nonPromotionAmount)| number:'1.2-2'}}</span>
                                        </div>
                    
                                        <div class="w-100"></div>
                                        <div class="col">
                                            <label id="This_qty" for="inputField">This Order Qty</label>
                                            <span id="This_order_amount">{{nonPromotionQTY}} </span>
                                        </div>
                                        <div class="col">
                                            <label id="This_qty" for="inputField">This Order Amount</label>
                    
                                            <span id="This_order_amount">${{nonPromotionAmount| number:'1.2-2'}} </span>
                                        </div>
                                    </div>
                                </div>
                    
                            </div>
                        </div>
                    </div>
                    <!-- <div>
                        <button type="button" (click)="clearQuantity()" *ngIf="hidereset">Clear</button>
                    </div> -->
                </div>
                <div class="nonpromo ">
                    <div class="row  mt-3  spacedropdown ">
                        <div class="col-lg-10 ">
                            <div>
                                <label class="productcodename">Product Name/Code</label>
                                <label class="productcategory">Product Category</label>
                                <label class="ProductGroup">Product Group</label>
                            </div>

                            <div class="row  ">
                                <div class="col-md-3 col-lg-3 col-sm-3 Drop_ng dropdownborder custon-nonprobubbles">
                                    <div class="input-icons">
                                        <form [formGroup]="ProductnamecodeForm" class="dropDown-field dropdown_list"
                                            style="width: 100%;">
                                            <ng-multiselect-dropdown class="catty select_category" name="city"
                                                [placeholder]="'Search by Name/Code'" formControlName="citys"
                                                [disabled]="disabled" [settings]="dropdownSettings11"
                                                [data]=" toppingList1" (onSelect)="onProductcodenameSelect($event)"
                                                (onDeSelect)="onProductCodeNameDeSelect($event)"
                                                (onDeSelectAll)="onItemDeSelectOrAllProductNameCode($event)"
                                                (onSelectAll)="onItemSelectOProductCodeName($event)">
                                            </ng-multiselect-dropdown>
                                            <div class="dropdown-placeholder catty-placeholder">
                                                <span *ngIf="ProductnamecodeForm.get('citys').value.length == 0"
                                                    style="color:grey;"> Product Name/Code </span>
                                                <span *ngIf="ProductnamecodeForm.get('citys').value.length == 1"
                                                    class="selected-placeholder">
                                                    {{ProductnamecodeForm.get('citys').value.length}} Selected Product
                                                </span>
                                                <span *ngIf="ProductnamecodeForm.get('citys').value.length > 1"
                                                    class="selected-placeholder">
                                                    {{ProductnamecodeForm.get('citys').value.length}} Selected Products
                                                </span>
                                            </div>
                                        </form>
                                    </div>
                                </div>


                                <div class="col-md-3 col-lg-3 col-sm-3   dropdownborder custon-nonprobubbles">
                                    <div class="input-icons ">
                                        <form [formGroup]="categoryForm" class="dropDown-field dropdown_list"
                                            style="width: 100%;">
                                            <ng-multiselect-dropdown class="catty select_category" name="city"
                                                [placeholder]="'Category'" formControlName="categoryy"
                                                [disabled]="disabled" [settings]="dropdownSettingscat"
                                                [data]="catagoryData" (onSelect)="onItemSelect($event)"
                                                (onDeSelect)="onItemDeSelect($event)"
                                                (onDeSelectAll)="onItemDeSelectOrAll($event)"
                                                (onSelectAll)="onItemSelectOrAll($event)">
                                            </ng-multiselect-dropdown>
                                            <div class="dropdown-placeholder catty-placeholder">
                                                <span *ngIf="categoryForm.get('categoryy').value.length == 0"
                                                    style="color:grey;"> Select Category </span>
                                                <span *ngIf="categoryForm.get('categoryy').value.length == 1"
                                                    class="selected-placeholder">
                                                    {{categoryForm.get('categoryy').value.length}} Category </span>
                                                <span *ngIf="categoryForm.get('categoryy').value.length > 1"
                                                    class="selected-placeholder">
                                                    {{categoryForm.get('categoryy').value.length}} Category(s)
                                                </span>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <!-- <div class="col-md-3 col-lg-3 col-sm-3  dropng dropdownborder custon-nonprobubbles">
                                    <div class="input-icons ">
                                        <form [formGroup]="subcategoryForm" class="dropDown-field dropdown_list">
                                            <ng-multiselect-dropdown class="subcatty sub_category" name="subCategory"
                                                [placeholder]="''" formControlName="subCategory" [disabled]="disabled"
                                                [settings]="dropdownSettingssubcat" [data]="sub_category"
                                                (onSelect)="onSubCategorySelect($event)"
                                                (onDeSelect)="onSubCategoryDeSelect($event)"
                                                (onDeSelectAll)="onSubCategoryDSelectOrAll($event)"
                                                (onSelectAll)="onSubCategorySelectOrAll()">
                                            </ng-multiselect-dropdown>
                                            <div class="dropdown-placeholder subcatty-placeholder">
                                                <span *ngIf="subcategoryForm.get('subCategory').value.length == 0"
                                                    style="color:grey;"> Select Subcategory </span>
                                                <span *ngIf="subcategoryForm.get('subCategory').value.length == 1"
                                                    class="selected-placeholder">
                                                    {{subcategoryForm.get('subCategory').value.length}}
                                                    subcategory</span>
                                                <span *ngIf="subcategoryForm.get('subCategory').value.length > 1"
                                                    class="selected-placeholder">
                                                    {{subcategoryForm.get('subCategory').value.length}}
                                                    subcategory(s)
                                                </span>

                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <div class="col-md-2 col-lg-3 col-sm-3 drop_ng dropdownborder custon-nonprobubbles">
                                    <div class="input-icons ">
                                        <form [formGroup]="type" class="dropDown-field dropdown_list">
                                            <ng-multiselect-dropdown class="stts stts_typeselected" name="type"
                                                [placeholder]="'Type'" formControlName="type" [disabled]="disabled"
                                                [settings]="dropdownSettingstypeid" [data]="typeI"
                                                (onSelect)="onTypeSelect($event)" (onDeSelect)="onTypeDeSelect($event)"
                                                (onSelectAll)="onTypeSelectOrAll()"
                                                (onDeSelectAll)="OnTypeDeselectOrAll()">
                                            </ng-multiselect-dropdown>
                                            <div class="dropdown-placeholder type-placeholder">
                                                <span *ngIf="type.get('type').value.length == 0" style="color:grey;">
                                                    Select
                                                    Type </span>
                                                <span *ngIf="type.get('type').value.length == 1"
                                                    class="selected-placeholder"> {{type.get('type').value.length}}
                                                    Type
                                                    selected </span>
                                                <span *ngIf="type.get('type').value.length > 1"
                                                    class="selected-placeholder"> {{type.get('type').value.length}}
                                                    Type(s)
                                                    selected </span>

                                            </div>
                                        </form>
                                    </div>
                                </div> -->
                                <div class="col-md-3 col-lg-3 col-sm-3 Drop_ng dropdownborder custon-nonprobubbles">
                                    <div class="input-icons ">
                                        <form [formGroup]="getproductForm" class="dropDown-field dropdown_list">
                                            <ng-multiselect-dropdown class="stts stts_typeselected"
                                                formControlName="getprocategroy" name="getprocategroy"
                                                [placeholder]="'Product Group'" [disabled]="disabled"
                                                [settings]="dropdownproductgroup" [data]="prosubgroupdropdown"
                                                (onSelect)="onProductSelect($event)"
                                                (onDeSelect)="onProductDeSelect($event)"
                                                (onSelectAll)="onProductSelectOrAll($event)"
                                                (onDeSelectAll)="onProductDeSelectOrAll($event)">

                                            </ng-multiselect-dropdown>
                                            <div class="dropdown-placeholder type-placeholder">
                                                <span *ngIf="getproductForm.get('getprocategroy').value.length == 0"
                                                    style="color:grey;"> Select Product Group
                                                </span>

                                                <span *ngIf="getproductForm.get('getprocategroy').value.length == 1"
                                                    class="selected-placeholder">
                                                    {{getproductForm.get('getprocategroy').value.length}}
                                                    Product
                                                </span>
                                                <span class="selected-placeholder"
                                                    *ngIf="getproductForm.get('getprocategroy').value.length > 1">
                                                    {{getproductForm.get('getprocategroy').value.length}}
                                                    Products</span>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <!-- <div class="col-md-3 dropdownborder">
                                            <div class="input-icons ">
                                                <form [formGroup]="myFormsIdentifier" class="dropDown-field dropdown_list">
                                                    <ng-multiselect-dropdown class="identifier identi_fier"
                                                        [placeholder]="'Identifier'" formControlName="identifiers"
                                                        [settings]="dropdownSettingsmaterialid" [data]="materialIdentifier"
                                                        (onSelect)="onMaterialIdentifierSelect($event)"
                                                        (onDeSelect)="onMaterialIdentifierDeSelect($event)"
                                                        (onDeSelectAll)="onMaterialIdentifierDeSelectOrAll()"
                                                        (onSelectAll)="onMaterialIdentifierSelectOrAll()">
                                                    </ng-multiselect-dropdown>
                                                    <div class="dropdown-placeholder identifier-placeholder">
                                                        <span *ngIf="myFormsIdentifier.get('identifiers').value.length == 0"
                                                            style="color:grey;"> Select identifiers </span>
                                                        <span *ngIf="myFormsIdentifier.get('identifiers').value.length == 1"
                                                            class="selected-placeholder">
                                                            {{myFormsIdentifier.get('identifiers').value.length}}
                                                            identifiers
                                                        </span>
                                                        <span *ngIf="myFormsIdentifier.get('identifiers').value.length > 1"
                                                            class="selected-placeholder">
                                                            {{myFormsIdentifier.get('identifiers').value.length}}
                                                            identifier(s)
                                                        </span>
    
                                                    </div>
                                                </form>
                                            </div>
                                        </div> -->
                                <!-- <mat-slide-toggle (click)="toggleData($event) "
                                    style="position: relative;left: 64px;top:6px"> Items With Order Qty 
                                </mat-slide-toggle> -->

                                <mat-slide-toggle (click)="toggleDATA() "
                                style="position: relative;left: 64px;top:6px"> Items With Order Qty 
                            </mat-slide-toggle>

                           

                                <div class="col" style="position: relative;left:150px">
                                    <div class="icon btnhover refreshbtn">
                                        <img src="assets/img/Refreshbutton.svg" (click)="refresh()" class="refresh-icon"
                                            alt="refresh">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-5">
                        <!-- <div class="col-lg-12 nonpromoSearch" style="margin-left: 1%;">
                            <div class="col-md-4 srch-hover">
                                 style="margin-right: -30px;"
                                <div class="searchBox1 d-flex">
                                    <input class="searchInput1" type="text" name=""
                                        placeholder="Type & search for anything" (keyup)="onSearchChange($event)">
                                    <button class="search-btn">Search</button>
                                    <button class="searchButton" href="#">
                                        <i class="material-icons">
                                            search
                                        </i>
                                    </button>
                                </div>
                            </div>
                        </div> -->
                        <!-- <mat-slide-toggle class="togglebutton" (click)="toggleData($event) "> Items With Order Qty
                        </mat-slide-toggle> -->
                    </div>


                    <div class="tabel-div">
                        <table class="tableclass">
                            <thead class="table-headercolor" style="height: 44px;">
                                <tr>
                                    <th width="30"></th>
                                    <th data-sortable="true" class="align-center">Product Code</th>

                                    <th data-sortable="true" class="align-center">Product Name</th>
                                    <th></th>

                                    <th data-sortable="true" class="align-center"> Identifier</th>
                                    <!-- <th data-sortable="true">classification</th>  -->
                                    <!-- <th data-sortable="true">SKU</th> -->
                                    <th class="align-center">Registration No</th>
                                    <th class="align-center">MOQ</th>
                                    <th data-sortable="true" class="align-center"> UnitPrice</th>
                                    <!-- <th data-sortable="true">Stock Qty</th> -->
                                    <!-- <th data-sortable="false">Tax Templete</th> -->
                                    <th data-sortable="false" class="align-center"> Order Quantity</th>
                                    <th data-sortable="false" class="align-center"> Order Amount</th>
                                </tr>
                            </thead>
                            <tbody class="tbodayheight">
                              
                                    <tr class="table-row" *ngFor="let Item of orderNonPromotionsdata " 
                                    [ngClass]="{'promotionItem': Item.isInPromotion===true}">
                                    <ng-container *ngIf="toggleStateNonPromodata ? Item.isPromotionSelected : true">
                                    
                                    <td width="30"> <input type="checkbox" class="check custom-checkbox"
                                            [checked]="Item.isPromotionSelected" (change)="checkboxChange($event,Item)"
                                            onfocus="this.checked=''"></td>

                                    <td style="text-align: left;color: grey;">{{Item.productSKUName}}</td>
                                    <td style="text-align: left;width: 298px;color: grey;">{{Item.stockitemname}}</td>
                                    <!-- <td>{{Item.materialcustomidentifier}}66</td> -->
                                    <td style="text-align: left;padding-left: 20px;color: grey;">{{Item.materialCustomName}}</td>
                                    <!-- <td>{{Item.classification}}</td> -->
                                    
                                    <td style="position: relative; left:-41px">
                                        <input style="text-align: right;border: none; background: none;color: grey;" disabled type="" name="" [(ngModel)]="Item.registrationNumber"
                                            [value]="(Item.registrationNumber)">
                                    </td>
                                    <td style="position: relative;left: 32px;color: grey;">{{Item.moq}}</td>

                                    <td style="display: flex;padding-left: 44px;color: grey;"> ${{Item.price | number:'1.2-2'}}</td>
                                    <!-- <td><input type="text" placeholder="Enter" class="quatity-inp"
                                                    [(ngModel)]="Item.stock"></td> -->
                                    <!-- <td>{{Item.stockqty}}</td> -->
                                    <!-- <td>
                                                <select class="tax-select" [(ngModel)]="Item.taxid">
                                                    <option value="" selected hidden>Select tax</option>
                                                    <option *ngFor="let option of taxdropdowndata"
                                                        [value]="option.taxTemplateId">
                                                        {{option.taxTemplateName}}
                                                    </option>
                                                </select>
                                                <img src="assets/img/doubleTickes-default.svg" alt="double-blue-tick"
                                                    (click)="doubleClick(Item.taxid)" style="margin-left: 5px;">
                                            </td> -->

                                    <!-- <td><input type="number" placeholder="Enter " class="quatity-inp" 
                                                    [(ngModel)]="Item.quantity" 
                                                     (change)="quantityChange(Item)  "
                                                     ></td> -->
                                    <td style="    position: relative;
                                    left: 13px;">

                                            <input type="number" placeholder="Enter " class="quatity-inp" min="0"
                                            [(ngModel)]="Item.quantity"   (ngModelChange)="quantityChange(Item)"
                                            name="Item.quantity" oninput="validity.valid||(value='')">
                                    </td>
                                    <td style="display: flex;color: grey; ">
                                        <input disabled type="number" name="" [(ngModel)]="Item.quantity* Item.price"
                                            [value]="(Item.quantity || 0) * Item.price"
                                            [ngClass]="{'IteminputBoxesD': Item.discount == 100, 'IteminputBoxes': Item.discount != 100 } ||0"
                                            style="text-align: right; border: none; background: none;">
                                    </td>
                                </ng-container>
                                </tr>

                            </tbody>
                        </table>

                        <div class="bottom-table tt" id="totalnonprobackcolor">
                            <!-- <div class="row">
                                            <div class="col-1">
                                              <b class="btm-total">Total </b>
                                            </div>
                                            <div class="col-9">
          
                                            </div>
                                            <div class="col"style="margin-left: -5%;" >
                                                {{quantityadd ?? 0}}
                                            </div>
                                            <div class="col"style="margin-left: 6%;" >
                                                {{price ?? 0}}
                                            </div>
                                            
                                            </div> -->
                        </div>
                        <div class=" addbuttons mt-2">
                            <button type="button " class="btn btn-primary saveitems " style="width: 150px;"
                                (click)="addnonPromoItems()">Confirm</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<!-- <div class="t_op-bottom">
    <div (click)="expandPromotions()" class="Removecoll_apsible">
        <div class="row">
            <div class="col-md-10">
                <p class="label-class">Promotions </p>
            </div>
            <div class="col-md-2">
                <input class="searchInput_11" type="text" name="" placeholder="Search here anything"
                    (keyup)="searchData($event)">
                <mat-icon class="searchiconsmat">search</mat-icon>
                <button class="searchbuttonpromotions">Search</button>
            </div>
        </div>
    </div>
    <div class="con_tent">
        <br>
        <div class="promotion-card">
            <div class="promoimgs">
                <div class="row">
                    <div class="col-md-3" *ngFor="let Item of arrayOfImages;let i=index;">
                        <div class="promotion-container" [ngClass]="{ 'selected': Item.isSelected }"
                            (click)="selectPrmotionItem(Item)">
                            <div class="img-container">
                                <img class="promotion-img" src="https://via.placeholder.com/260x280"  alt="Promotion"/>
                                <img class="promotion-img"
                                    src="data:image/jpeg;base64,{{Item.imageurl}}" alt="Promotion" />

                            </div>
                            <div class="promotion-info">
                                <div class="promo-name">
                                    Name: <span> {{Item.promotionName}}</span>
                                </div>

                                <div class="promo-type">
                                    Type: <span> {{Item.promotionTypesName}}</span>
                                </div>
                                <div class="promo-view-wrapper">
                                    <div class="promo-view" (click)="showPromotionInfo($event,Item)">
                                        <mat-icon> remove_red_eye </mat-icon>
                                    </div>
                                </div>
                            </div>
                            <div class="cancel-icon" (click)="removePromotion($event,Item)">
                                <mat-icon mat-button class="close-icon">close</mat-icon>
                            </div>
                        </div>
                    </div>

                </div>


                 <div class="col-md-3 img-container" *ngFor="let Item of arrayOfImages;let i=index;">
                    <div (click)="getpromotionImages($event,Item);">
                        <img class="card1" src="data:image/jpeg;base64,{{Item.imageurl}}"  [ngClass]="{ 'selected': Item.isSelected }" alt="image does not exit"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>  -->