<div class="font">
  <div class="main" width="900%">
    <div class="container promotionpopup-scroll">
      <div class="addUser">
        <!-- <img class="print-img" src="../../../assets/material/print-img.svg" alt="" /> -->
        <mat-icon mat-button class="close-icon" [mat-dialog-close]="true">close</mat-icon>
      </div>
      <div class="head-t">
        <h3 class="addU font">Add Association</h3>
        <div class="row top-bottom">
          <div class="row text-center"></div>
        </div>

        <div class="row" style="width: 103%;">
          <div class="col-md-6">
            <div class="promotiont">
              <label>Type of Association<span>*</span></label><br />
              <select #teams (change)="selectedValue(teams.value)" class="form-select select-asso" aria-label=".form-select-lg example" disabled>
                <!-- <option  selected hidden>Select</option> -->
                <!-- <option value="0" hidden>Select association</option>
                <option value="1">Product to Dealer</option> -->
                <option value="2">Dealer to Product</option>
              </select>
            </div>
          </div>

          <div class="col-md-6">

            <div *ngIf="screenValue== 1 " class="promotiont">

              <img class="right-arrow" src="../../../assets/img/right-arrow.png" alt="">
              <label>Product <span>*</span></label><br />
              <select #teams class="form-select select-asso" aria-label=".form-select-lg example"
                (change)="selectedProduct(teams.value);">
                <option selected hidden>Select</option>
                <option style="height: 900px;" *ngFor="let product of ProductListArray"
                  value="{{product.productSKUId}} and {{product.stockItemId}}">
                  <p (click)="selectedProduct(teams.value)">{{product.stockItemName}}</p>
                </option>

              </select>

              <!-- <div class="dealerr">
                <label class="DealerInfo-label">Product <span class="astr">*</span></label>
                <ng-select [items]="ProductListArray" id="dealerAllArray" name="dealerAllArray" required
                    [virtualScroll]="true" bindLabel="stockItemName" bindValue="stockItemId"
                    [searchable]="true" [clearable]="false" placeholder=" select dealer"
                     (change)="selectedProduct($event.value)">
                </ng-select>
            </div> -->
              <div class="hover-text">
                <img class="img1" src="../../../assets/img/i icon.svg" matTooxltip="" />
                <div class="tooltip-text" id="top">
                  <table class="tootipTable">
                    <tr>
                      <th class="left">Product Name</th>
                      <th class="left">Classification</th>
                      <th class="left">SKU</th>
                      <th class="left">Product Identifier</th>
                      <th class="left">Product Group</th>
                      <th class="left">Product Code</th>
                      <th class="left">Product Short Code</th>
                    </tr>
                    <tr *ngFor="let prod of tooltipData" style="text-align: center;">
                      <td>{{prod.productName}}</td>
                      <td>{{prod.classification}}</td>
                      <td>{{prod.sku}}</td>
                      <td>{{prod.productIdentifier}}</td>
                      <td>{{prod.productGroup}}</td>
                      <td>{{prod.productCode}}</td>
                      <td>{{prod.productShortCode}}</td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
            <div class="promotiont" *ngIf="screenValue== 2 ">
              <img class="right-arrow" src="../../../assets/img/right-arrow.png" alt="">
              <!-- <label>Dealer <span>*</span></label><br />
              <select #teams1  class="form-select select-asso" aria-label=".form-select-lg example"
                (change)="selectedDealer(teams1.value);" oninput='style.class="pink"'>
                <option selected hidden>Select</option>
                <option style="height: 900px;" *ngFor="let dealer of dealerListArray" [value]="dealer.customerId">
                  {{dealer.customerName}} </option>

              </select> -->
              <div class="dealerr">
                <label class="DealerInfo-label">Dealer <span class="astr">*</span></label>
                <ng-select [items]="dealerListArray" id="dealerAllArray" name="dealerAllArray" required
                  [virtualScroll]="true" bindLabel="customerName" bindValue="customerId" [searchable]="true"
                  [clearable]="false" placeholder=" Select Dealer " style="color: grey;" (change)="selectedDealer($event)">
                </ng-select>
              </div>
              <div class="hover-text">
                <!-- <img class="img1" src="../../../assets/img/i icon.svg" matTooxltip="" /> -->
                <div class="tooltip-text" id="top">
                  <table class="tootipTable">
                    <tr>
                      <th>Product Name</th>
                      <th>Classification</th>
                      <th>SKU</th>
                      <th>Product Identifier</th>
                      <th>Product Group</th>
                      <th>Product Code</th>
                      <th>Product Short Code</th>
                    </tr>
                    <tr *ngFor="let prod of tooltipDataDealer" style="background-color: red;">
                      <td>{{prod.productName}}</td>
                      <td>{{prod.classification}}</td>
                      <td>{{prod.sku}}</td>
                      <td>{{prod.productIdentifier}}</td>
                      <td>{{prod.productGroup}}</td>
                      <td>{{prod.productCode}}</td>
                      <td class="pg">{{prod.productShortCode}}</td>
                    </tr>
                  </table>
                </div>
              </div>

            </div>
          </div>
        </div>
        <!-- geography -->
        <div>
          <div class="row heading">
            <h5 class="geo-head">Geographies</h5>
          </div>
          <div class="row" *ngIf="screenValue== 1">
            <div class="col-md-12 slctd-row">
              <div class="row">
                <div class="col-md-9 sltd-span">
                  <span class="selectedname" *ngIf="false">Selected Geogrphies</span>
                  <span class="selectedcolor"
                    *ngIf="showselectedgeovalue">{{aboveDefaultGeoOfName}}({{selectedcountGeo}}/{{tottalgeoCount}})</span>
                  <!-- <span class="selectedclr2">India(15/15)</span>;
                  <span class="astr">Singpore(0/6)</span>;
                  <span class="selectedclr2">Japan(23/23)</span> -->
                </div>
                <div class="col-md-3">
                  <button class="slctd-geo-btn" [disabled]="!slectedgeo" (click)="geography('product')">
                    Selected Geographies
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>


        <!---delers geo  --->


        <div class="row" *ngIf="screenValue== 2">
          <div class="col-md-12 slctd-row">
            <div class="row">
              <div class="col-md-9 sltd-span">
                <span class="selectedname" *ngIf="false">Selected Geogrphies</span>
                <span class="selectedcolor"
                  *ngIf="showselectedgeovalue">{{aboveDefaultGeoOfName}}({{selectedcount}}/{{tottalgeoCount}})</span>
                <!-- <span class="selectedclr2">India(15/15)</span>;
        <span class="astr">Singpore(0/6)</span>;
        <span class="selectedclr2">Japan(23/23)</span> -->
              </div>
              <div class="col-md-3">
                <button class="slctd-geo-btn" [disabled]="!slectedgeo1" (click)="geography('dealer')">
                  Selected Geographies
                </button>
              </div>
            </div>
          </div>
        </div>



        <!-- Dealer list -->
        <div *ngIf="screenValue== 0|| screenValue == 1 ">
          <label class="dealer-list">Dealers List</label>
          <br />
        </div>
        <div class="row">
          <div class="col-12" *ngIf="screenValue == 0">
            <input type="search" name="" placeholder="Product/dealer not Selected Yet" id="" class="select-asso"
              disabled>
          </div>

          <div class="row" *ngIf="screenValue == 1">
            <div class="col-md-6 dlr-promotiont1">
              <!-- <form [formGroup]="myForm" class="dropdown-form-dealer">
                <ng-multiselect-dropdown class="promo_1" [placeholder]="''" formControlName="city" name="city"
                  [disabled]="disabled" [settings]="dropdownSettings3" [data]="dealersArray"
                  (onSelect)="onDealerSelect($event)" (onDeSelect)="onDealerDeSelect($event)" (onDeSelectAll)="onItemDealerDeSelectOrAll($event)" (onSelectAll)="onItemDealerSelectOrAll($event)">
                </ng-multiselect-dropdown> -->

              <!-- <div class="dropdown-placeholder ">
                  <span *ngIf="myFormDlr.get('city').value.length == 0" style="color: black">Search & select Dealers
                  </span>
                  <span *ngIf="myFormDlr.get('city').value.length == 1" class="selected-placeholder">
                    {{ myFormDlr.get("city").value.length }} Dealers selected
                  </span>
                  <span *ngIf="myFormDlr.get('city').value.length > 1" class="selected-placeholder">
                    {{ myFormDlr.get("city").value.length }} Dealers selected
                  </span>
                </div> -->
              <!-- <div  id="dp" class="dropdown-placeholder role-placeholder">
                  <span *ngIf="myFormDlr.get('city').value.length == 0" style="color: black"> Search & select Dealers </span>
                  <span *ngIf="myFormDlr.get('city').value.length == 1" class="selected-placeholder"> {{myFormDlr.get('city').value.length}} Dealers selected </span>
                  <span *ngIf="myFormDlr.get('city').value.length > 1" class="selected-placeholder"> {{myFormDlr.get('city').value.length}} Dealers selected </span>
        
                </div>
              </form> -->
              <form [formGroup]="myFormDealer" class="dropdown-form-dealer">
                <ng-multiselect-dropdown class="promo_1-placeholder promo_1"  name="city1" [placeholder]="'Category'"
                  formControlName="dealer" [disabled]="disabled" [settings]="dropdownSettings3" [data]="dealersArray"
                  (onSelect)="onDealerSelect($event)" (onDeSelect)="onDealerDeSelect($event)" 
                  (onDeSelectAll)="onItemDealerDeSelectOrAll($event)" (onSelectAll)="onItemDealerSelectOrAll($event)">
                </ng-multiselect-dropdown>
                <div class="dropdown-placeholder ">
                  <span *ngIf="myFormDealer.get('dealer').value.length == 0" style="color: black;">Search & select
                    Dealers</span>
                  <span *ngIf="myFormDealer.get('dealer').value.length == 1" class="selected-placeholder">
                    {{myFormDealer.get('dealer').value.length}} dealers selected </span>
                  <span *ngIf="myFormDealer.get('dealer').value.length > 1" class="selected-placeholder">
                    {{myFormDealer.get('dealer').value.length}} dealers selected </span>
                </div>
              </form>
            </div>
            <!-- <div class="col-md-6 promotiont1">
              <form [formGroup]="myForm" class="dropdown-form">
                <ng-multiselect-dropdown
                  class="promo1"
                  [placeholder]="'Geographies'"
                  formControlName="city1"
                  [disabled]="disabled"
                  [settings]="dropdownSettings3"
                  [data]="toppingList"
                >
                </ng-multiselect-dropdown> -->

            <!-- <div class="dropdown-placeholder promo1-placeholder">
                  <span
                    *ngIf="myForm.get('city1').value.length == 0"
                    style="color: black"
                    >Select Geographies
                  </span>
                  <span
                    *ngIf="myForm.get('city1').value.length == 1"
                    class="selected-placeholder"
                  >
                    {{ myForm.get("city1").value.length }} Geographies selected
                  </span>
                  <span
                    *ngIf="myForm.get('city1').value.length > 1"
                    class="selected-placeholder"
                  >
                    {{ myForm.get("city1").value.length }} Geographies selected
                  </span>
                </div> -->
            <!-- </form> -->
          </div>
          <!-- </div>
        </div> -->


        </div>

        <!-- product list -->

        <div *ngIf="screenValue==2">
          <div class="row">
            <div class="col">
              <label class="dealer-list">Product List</label>

            </div>


          </div>
          <br>
          <div class="row" style="color: grey;">
            <div class="col promotiont1 dynamicbubbles">
              <form [formGroup]="myForm" class="dropdown-form-categ">
                <ng-multiselect-dropdown class="categoryy adddealerbubbles" name="city1" [placeholder]="'Category'"
                  formControlName="city1" [disabled]="disabled" [settings]="dropdownSettings1" [data]="catgname"
                  (onSelect)="onItemSelect($event)" (onDeSelect)="onItemDeSelect($event)"
                  (onDeSelectAll)="onItemDeSelectOrAll($event)" (onSelectAll)="onItemSelectOrAll($event)">
                </ng-multiselect-dropdown>


                <div class="dropdown-placeholder categoryy-placeholder">
                  <span *ngIf="myForm.get('city1').value.length == 0" style="color: grey;">Select category </span>
                  <span *ngIf="myForm.get('city1').value.length == 1" class="selected-placeholder">
                    {{myForm.get('city1').value.length}} category </span>
                  <span *ngIf="myForm.get('city1').value.length > 1" class="selected-placeholder">
                    {{myForm.get('city1').value.length}} category(s) </span>

                </div>

              </form>
            </div>
            <div class="col promotiont1 dynamicsubcats">
              <form [formGroup]="myForm1" class="dropdown-form-categ">
                <ng-multiselect-dropdown class="subCategoryy subcatbubbles" name="city2" [placeholder]="'Geographies'"
                  formControlName="city2" [disabled]="disabled" [settings]="dropdownSettings2" [data]="sub_category"
                  (onSelect)="onSubCategorySelect($event)" (onDeSelect)="onSubCategoryDeSelect($event)"
                  (onDeSelectAll)="onSubCategoryDSelectOrAll($event)" (onSelectAll)="onSubCategorySelectOrAll()">
                </ng-multiselect-dropdown>


                <div class="dropdown-placeholder subCategoryy-placeholder">
                  <span *ngIf="myForm1.get('city2').value.length == 0" style="color: grey;"> Sub-category </span>
                  <span *ngIf="myForm1.get('city2').value.length == 1" class="selected-placeholder">
                    {{myForm1.get('city2').value.length}} Sub-category </span>
                  <span *ngIf="myForm1.get('city2').value.length > 1" class="selected-placeholder">
                    {{myForm1.get('city2').value.length}} Sub-cats </span>

                </div>

              </form>
            </div>


            <div class="col promotiont1 dynamictypesbubbles">
              <form [formGroup]="myForm2" class="dropdown-form-categ">
                <ng-multiselect-dropdown class="typess selecttypes" name="city3" [placeholder]="'Geographies'"
                  formControlName="city3" [disabled]="disabled" [settings]="dropdownSettings6" [data]="typeI"
                  (onSelect)="onTypeSelect($event)" (onDeSelect)="onTypeDeSelect($event)"
                  (onSelectAll)="onTypeSelectOrAll()" (onDeSelectAll)="OnTypeDeselectOrAll()">
                </ng-multiselect-dropdown>


                <div class="dropdown-placeholder typess-placeholder">
                  <span *ngIf="myForm2.get('city3').value.length == 0" style="color: grey;">Select Type </span>
                  <span *ngIf="myForm2.get('city3').value.length == 1" class="selected-placeholder">
                    {{myForm2.get('city3').value.length}} Type </span>
                  <span *ngIf="myForm2.get('city3').value.length > 1" class="selected-placeholder">
                    {{myForm2.get('city3').value.length}} Type(s) </span>
                </div>

              </form>
            </div>
            <div class="col promotiont1 dynamicproductbubbles">
              <form [formGroup]="myForm3" class="dropdown-form-categ">

                <ng-multiselect-dropdown class="productt selectprodectss" name="city4" [placeholder]="''"
                  formControlName="city4" [disabled]="disabled" [settings]="dropdownSettings4" [data]="Product"
                  (onSelect)="onProductSelect($event)" (onDeSelect)="onProductDeSelect($event)"
                  (onDeSelectAll)="onProductDeSelectOrAll($event)" (onSelectAll)="onProductSelectOrAll($event)">
                </ng-multiselect-dropdown>

                <div class="dropdown-placeholder productt-placeholder">
                  <span *ngIf="myForm3.get('city4').value.length == 0" style="color: grey;">Select Product </span>
                  <span *ngIf="myForm3.get('city4').value.length == 1" class="selected-placeholder">
                    {{myForm3.get('city4').value.length}} Product </span>
                  <span *ngIf="myForm3.get('city4').value.length > 1" class="selected-placeholder">
                    {{myForm3.get('city4').value.length}} Product(s) </span>
                </div>

              </form>
            </div>
            <div class=" promotiont1">
              <div class="icon btnhover refreshbtn1" style=" cursor: pointer;" (click)="refresh()">
                <img class="refresh" src="assets/img/Vector.png" style="position: relative;top: 9px;left: 12px;"
                  alt="refresh">
              </div>
            </div>


          </div>
          <!-- Product Identifier  start here -->
          <!-- <div class="row pr_omo">
            <div class="col-3 promotiont1">
              <form [formGroup]="myForm4" class="dropdown-form-categ">
                <ng-multiselect-dropdown name="city5" formControlName="city5" class="promo1" [placeholder]="''"
                  [disabled]="disabled" [settings]="dropdownSettings5" [data]="toppingList"
                  (onSelect)="onproductIdentifierSelect($event)" (onDeSelect)="onproductIdentifierDeSelect($event)"
                  (onDeSelectAll)="onproductIdentifierDeSelectOrAll($event)"
                  (onSelectAll)="onproductIdentifierSelectOrAll($event)">
                </ng-multiselect-dropdown>

                <div class="dropdown-placeholder promo1-placeholder">
                  <span *ngIf="myForm4.get('city5').value.length == 0" style="color: black;">Product Identifier </span>
                  <span *ngIf="myForm4.get('city5').value.length == 1" class="selected-placeholder">
                    {{myForm4.get('city5').value.length}} Product </span>
                  <span *ngIf="myForm4.get('city5').value.length > 1" class="selected-placeholder">
                    {{myForm4.get('city5').value.length}} Product(s) </span>

                </div>

              </form>
            </div>
 -->


          <!-- <div class="col-9">
              <div class="searchBox d-flex" style=" cursor: pointer">
                <input class="searchInput" style="font-family: 'Gilroy'" type="text" name=""
                  placeholder="Type & search for anything" (keyup)="onSearchChange($event)">
                <button class="searchButton" href="#">
                  <i class="material-icons">
                    search
                  </i>
                </button>
                <button class="search-btn" style="font-family: 'Gilroy'">Search</button>
              </div>
            </div> -->


          <!-- </div> Product identifier -->


        </div>


        <div class="row mainclass" *ngIf="screenValue == 1 || screenValue ==2 ">
          <div class="col-md-7 bubbless" *ngIf="screenValue == 1 && dealerList.length > 0 ">
            <mat-checkbox class="checkboxStyle" aria-label="Select All" [checked]="isChecked()"
              [indeterminate]="isIndeterminate()" (change)="$event ? toggleAll($event) : null">
              <span *ngIf="aarrayToPush.length == 0" class="contentStyle">No Dealers Selected </span>
              <span *ngIf="aarrayToPush.length == selectedDealerInDropDown.length" class="contentStyle">All Dealers
                Selected </span>
              <span
                *ngIf="aarrayToPush.length > 0 && selectedDealerInDropDown.length != aarrayToPush.length && screenValue == 1"
                class="contentStyle"> Some Dealers Selected</span>
            </mat-checkbox>
          </div>
          <!-- products to dealer -->

          <div class="col-md-7" *ngIf="screenValue == 2 && dealerList.length > 0 ">
            <mat-checkbox class="checkboxStyle" aria-label="Select All" [checked]="isCheckedForProduct()"
              [indeterminate]="isIndeterminateForProduct()" (change)="$event ? toggleProductAll($event) : null">
              <span *ngIf="aarrayToPush1.length == 0" class="contentStyle">No Products Selected </span>
              <span *ngIf="dealerList.length == aarrayToPush1.length" class="contentStyle">All Products Selected </span>
              <span *ngIf="aarrayToPush1.length > 0 && dealerList.length != aarrayToPush1.length && screenValue == 2 "
                class="contentStyle"> Some Products Selected</span>
            </mat-checkbox>
          </div>
          <!-- <div class="col-md-7"
            *ngIf="selectedDealerInDropDown.length == aarrayToPush.length && aarrayToPush.length != 0  && screenValue == 1 ">

            <p class="p-dealer" style="margin-left: -8px;margin-top: 43px;"> <img src="../../../assets/img/allselected.svg" /> All
              Dealers Selected</p>
          </div> -->



          <!-- <div class="col-md-7"
          *ngIf="dealerList.length == aarrayToPush1.length && aarrayToPush1.length != 0 && screenValue == 2">

          <p class="p-dealer" style="margin-left: -8px;"> <img src="../../../assets/img/allselected.svg" /> All
            Products Selected</p>
        </div> -->


          <!-- <div class="col-md-7"
            *ngIf="aarrayToPush.length > 0 && selectedDealerInDropDown.length != aarrayToPush.length && screenValue == 1 ">

            <p class="p-dealer" style="margin-left: -8px; margin-top: 43px;"><img src="../../../assets/img/intermidiate.svg" /> Some
              Dealers Selected</p>
          </div> -->


          <!-- <div class="col-md-7"
          *ngIf="aarrayToPush1.length > 0 && dealerList.length != aarrayToPush1.length && screenValue == 2 ">

          <p class="p-dealer" style="margin-left: -8px;"><img src="../../../assets/img/intermidiate.svg" /> Some
            Product Selected</p>
        </div> -->

          <div class="row">
            <div class="col-9">
            </div>
            <div class="col-md-3">
              <div class="searchBox1 d-flex">
                <div class="promotiont2">
                  <select class="form-select select-asso" style="color: grey;" aria-label=".form-select-lg example"
                    [(ngModel)]="selectedGeoField1">
                    <option selected hidden>Select</option>
                    <option value="" disabled selected hidden>Select Field</option>
                    <option value="mrp"> MRP</option>
                    <option value="marginPercent"> Margin Percent</option>
                    <option value="maxOrderQty"> Max Order Qty</option>
                    <option value="minOrderQty"> Min Order Qty</option>
                    <option value="discountPercent"> Discount Percent</option>
                    <option value="leadTime"> Lead Time</option>
                    <!-- <option value="registrationNumber"> Registration Number</option> -->
                  </select>
                </div>
                <div class="promotiont3">
                  <input class="searchInput1" style="font-family: 'Gilroy'" type="text" name=""
                    [(ngModel)]="updateGeographyValue1" placeholder="Enter value" />
                </div>
                <div class="promotiont3" *ngIf="screenValue != 2" (click)="applySelectedValue1()">
                  <button type="button" class="saveas-draft1">Apply</button>
                </div>
                <div class="promotiont3" *ngIf="screenValue == 2" (click)="applySelectedValueforDealer()">
                  <button type="button" class="saveas-draft1">Apply</button>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-9"></div>
              <div class="col-3">
                <div class="icon btnhover refreshbtn2" (click)="resetAll()">
                  <img class="refresh" src="assets/img/ultrarefresh.svg"
                    style="position: relative; top: 9px; left: 12px" alt="refresh" />
                </div>
              </div>
            </div>
          </div>
          <br />

          <div *ngIf="screenValue != 2 && dealerList.length > 0" style="width: 100%;">
            <div *ngFor=" let data of dealerList;let i=index" style="width: 100%;">
              <div class="collapsible">
                <div class="row">
                  <div class="col-md-1">
                    <mat-checkbox class="example-margin font" (click)="$event.stopPropagation()" [color]="color"
                      (change)="$event ? toggle(data.dealerId, $event) : null" [checked]="exists(data.dealerId)">
                    </mat-checkbox>
                  </div>
                  <div class="col-md-10 check1">
                    <p class="label-cls">{{data?.dealerName}}</p>
                  </div>
                  <!-- <div class="col-md-2 check1">
              <p class="label-cls">India (0/136)</p>
            </div>
            <div class="col-md-2 check1">
              <p class="label-cls">china (0/124)</p>
            </div>

            <div class="col-md-3 check1">
              <p class="label-cls">Singapore (0/145)</p>
            </div> -->
                  <div class="col-md-1" (click)="expandDealerInfoDiv(i)">
                    <img *ngIf="this.dealerList[i].flagforopen" [src]="image2" class="expand-arrow"
                      alt="add-user-btn" />
                    <img *ngIf="!this.dealerList[i].flagforopen" [src]="image1" class="expand-arrow"
                      alt="add-user-btn" />

                  </div>
                </div>
              </div>

              <div class="content" *ngIf="this.dealerList[i].flagforopen">
                <br />

                <div class="row mainclass">
                  <div class="col-md-7"></div>
                  <div class="col-md-3">
                    <div class="searchBox2 d-flex">
                      <div class="promotiont2">
                        <select class="form-select select-asso" aria-label=".form-select-lg example"
                          [(ngModel)]="selectedGeoField">
                          <option selected hidden>Select</option>
                          <option value="" disabled selected hidden>Select Field</option>
                          <option value="mrp"> MRP</option>
                          <option value="marginPercent"> Margin Percent</option>
                          <option value="maxOrderQty"> Max Order Qty</option>
                          <option value="minOrderQty"> Min Order Qty</option>
                          <option value="discountPercent"> Discount Percent</option>
                          <option value="leadTime"> Lead Time</option>
                          <!-- <option value="registrationNumber"> Registration Number</option> -->
                        </select>
                      </div>
                      <div class="promotiont3">
                        <input class="searchInput1" style="font-family: 'Gilroy'" type="text" name=""
                          [(ngModel)]="updateGeographyValue" placeholder="Enter value" />
                      </div>
                      <div class="promotiont3" (click)="applySelectedValue(i)">
                        <button type="button" class="saveas-draft1">Apply</button>
                      </div>
                    </div>
                  </div>
                  <div class="">
                    <div class="icon btnhover refreshbtn3" style="cursor: pointer; left: 97px;" (click)="Refresh()">
                      <img class="refresh" src="assets/img/ultrarefresh.svg"
                        style="position: relative; top: 9px; left: 12px" alt="refresh" />
                    </div>
                  </div>
                </div>
                <br />
                <table>
                  <tr>
                    <th style="width: 168px">Geography</th>
                    <th style="width: 168px">MrP(INR)</th>
                    <th style="width: 168px">Min order Qty</th>
                    <th style="width: 168px">Max order Qty</th>
                    <th style="width: 168px">Margin %</th>
                    <th style="width: 168px">Discount %</th>
                    <th style="width: 168px">Lead time (Days)</th>
                  </tr>
                  <tr *ngFor=" let item of data.formatedGeoGraphy;   let j=index ">
                    <td>
                      <img [src]="image1" class="expand-arrow1" alt="add-user-btn" (click)="expandOrderItemsDiv1()" />
                      {{item.geographyName}}
                    </td>
                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.mrp" class="uom-cls" id="fname" name="fname" />
                    </td>
                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.minOrderQty" class="uom-cls" id="fname" name="fname" />
                    </td>

                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.maxOrderQty" class="uom-cls" id="fname" name="fname" />
                    </td>

                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.marginPercent" class="uom-cls" id="fname" name="fname" />
                    </td>

                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.discountPercent" class="uom-cls" id="fname" name="fname" />
                    </td>

                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.leadTime" class="uom-cls" id="fname" name="fname" />
                    </td>
                  </tr>

                  <!-- <tr>
              <td>
                <img [src]="image1" class="expand-arrow1" alt="add-user-btn" (click)="expandOrderItemsDiv1()" />
                Malaysia (71/126)
              </td>
              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>
              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>

              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>

              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>

              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>

              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>
            </tr>

            <tr *ngIf="!orderitem1">
              <td class="check">
                <img [src]="image1" class="expand-arrow1" alt="add-user-btn" />

                Kedah (36/36)
              </td>
              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>
              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>
              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>
              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>
              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>
              <td>
                <input type="text" class="uom-cls" id="fname" name="fname" />
              </td>
            </tr> -->
                  <!-- <tr *ngIf="!orderitem1">
                <td class="check2">george town</td>
                <td>
                  <input type="text" class="uom-cls" id="fname" name="fname" />
                </td>
                <td>
                  <input type="text" class="uom-cls" id="fname" name="fname" />
                </td>
                <td>
                  <input type="text" class="uom-cls" id="fname" name="fname" />
                </td>
                <td>
                  <input type="text" class="uom-cls" id="fname" name="fname" />
                </td>
                <td>
                  <input type="text" class="uom-cls" id="fname" name="fname" />
                </td>
                <td>
                  <input type="text" class="uom-cls" id="fname" name="fname" />
                </td>
              </tr> -->
                </table>
              </div>
            </div>

          </div>
          <div style="width: 100%;" *ngIf="screenValue == 2 && dealerList.length > 0">
            <div *ngFor=" let data of dealerList;let i=index">
              <div class="collapsible">
                <div class="row">
                  <div class="col-md-1">
                    <mat-checkbox class="example-margin font" (click)="$event.stopPropagation()" [color]="color"
                      (change)="$event ? toggleForProduct(data.productIdId, $event) : null"
                      [checked]="existsProduct(data.productIdId)">
                    </mat-checkbox>
                  </div>
                  <div class="col-md-10 check1">
                    <p class="label-cls">{{data?.productName}}</p>
                  </div>
                  <!-- <div class="col-md-2 check1">
          <p class="label-cls">India (0/136)</p>
        </div>
        <div class="col-md-2 check1">
          <p class="label-cls">china (0/124)</p>
        </div>

        <div class="col-md-3 check1">
          <p class="label-cls">Singapore (0/145)</p>
        </div> -->
                  <div class="col-md-1" (click)="expandDealerInfoDiv(i)">
                    <img *ngIf="this.dealerList[i].flagforopen" [src]="image2" class="expand-arrow"
                      alt="add-user-btn" />
                    <img *ngIf="!this.dealerList[i].flagforopen" [src]="image1" class="expand-arrow"
                      alt="add-user-btn" />

                  </div>
                </div>
              </div>

              <div class="content" *ngIf="this.dealerList[i].flagforopen">
                <br />

                <div class="row mainclass">
                  <div class="col-md-7"></div>
                  <div class="col-md-3">
                    <div class="searchBox3 d-flex">
                      <div class="promotiont2">
                        <select class="form-select select-asso" aria-label=".form-select-lg example"
                          [(ngModel)]="selectedGeoField">
                          <option selected hidden>Select</option>
                          <option value="" disabled selected hidden>Select Feild</option>
                          <option value="mrp"> MRP</option>
                          <option value="marginPercent"> Margin Percent</option>
                          <option value="maxOrderQty"> Max Order Qty</option>
                          <option value="minOrderQty"> Min Order Qty</option>
                          <option value="discountPercent"> Discount Percent</option>
                          <option value="leadTime"> Lead Time</option>
                          <!-- <option value="registrationNumber"> Registration Number</option> -->
                        </select>
                      </div>
                      <div class="promotiont3">
                        <input class="searchInput1" style="font-family: 'Gilroy'" type="text" name=""
                          [(ngModel)]="updateGeographyValue" placeholder="Enter value" />
                      </div>
                      <div class="promotiont3" (click)="applySelectedValue(i)">
                        <button type="button" class="saveas-draft1">Apply</button>
                      </div>
                    </div>
                  </div>
                  <div class="">
                    <div class="icon btnhover refreshbtn4" style="cursor: pointer; left: 97px;" (click)="RefreshAll()">
                      <img class="refresh" src="assets/img/ultrarefresh.svg"
                        style="position: relative; top: 9px; left: 12px" alt="refresh" />
                    </div>
                  </div>
                </div>
                <br />
                <table>
                  <tr>
                    <th style="width: 168px">Geography</th>
                    <th style="width: 168px">MrP(INR)</th>
                    <th style="width: 168px">Min order Qty</th>
                    <th style="width: 168px">Max order Qty</th>
                    <th style="width: 168px">Margin %</th>
                    <th style="width: 168px">Discount %</th>
                    <th style="width: 168px">Lead time (Days)</th>
                  </tr>
                  <tr *ngFor=" let item of data.formatedGeoGraphy;   let j=index ">
                    <td>
                      <img [src]="image1" class="expand-arrow1" alt="add-user-btn" (click)="expandOrderItemsDiv1()" />
                      {{item.geographyName}}
                    </td>
                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.mrp" class="uom-cls" id="fname" name="fname" />
                    </td>
                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.minOrderQty" class="uom-cls" id="fname" name="fname" />
                    </td>

                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.maxOrderQty" class="uom-cls" id="fname" name="fname" />
                    </td>

                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.marginPercent" class="uom-cls" id="fname" name="fname" />
                    </td>

                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.discountPercent" class="uom-cls" id="fname" name="fname" />
                    </td>

                    <td>
                      <input type="text" [disabled]="data.defaultHeirarchyLevelId > item.geographyHierarchyId"
                        [(ngModel)]="item.leadTime" class="uom-cls" id="fname" name="fname" />
                    </td>
                  </tr>


                </table>
              </div>
            </div>

          </div>

          <div *ngIf="screenValue == 2">
            <p *ngIf="dealerList.length==0" class="">No Products Available</p>
          </div>
          <br>
          <br>
          <br>
          <div *ngIf="screenValue == 1" style="margin: auto;" class="save-submit">
            <div class="row footer">
              <div class="col">
                <button type="button" class="saveas-draft" (click)="saveAssociation()">Save</button>
              </div>
              <div class="col">
                <button type="button" [mat-dialog-close]="true" class="saveas-draft2">
                  Cancel
                </button>
              </div>
              <!-- <div class="col-md-5">
                                      <button type="button" [mat-dialog-close]="true" class="cancel">Cancel</button>
                              </div> -->
            </div>
          </div>

          <div *ngIf="screenValue == 2" style="margin: auto;" class="save-submit">
            <div class="row footer">
              <div class="col">
                <button type="button" class="saveas-draft" (click)="saveAssociationdealer()">Save</button>
              </div>
              <div class="col">
                <button type="button" [mat-dialog-close]="true" class="saveas-draft2">
                  Cancel
                </button>
              </div>
              <!-- <div class="col-md-5">
                    <button type="button" [mat-dialog-close]="true" class="cancel">Cancel</button>
              </div> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>